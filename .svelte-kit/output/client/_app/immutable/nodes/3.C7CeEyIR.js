import"../chunks/CWj6FrbW.js";import{i as V}from"../chunks/BR2mCiQU.js";import{ax as W,ay as l,az as P,aF as S,a as i,aA as ee,aD as a,aB as r,aC as s,j as c,y as T,aE as p,$ as C,f as te,aU as ae}from"../chunks/DZGQKL0P.js";import{i as u}from"../chunks/Fj0hnEDm.js";import{s as re}from"../chunks/ClxYYfde.js";import{s as se,a as oe}from"../chunks/BmPMW8co.js";import{p as ne}from"../chunks/B1QRMP0i.js";var ie=l('<p class="svelte-n0rr9g"><strong>Material:</strong> </p> <p class="svelte-n0rr9g"><strong>Thickness:</strong> </p>',1),ce=l('<button class="btn">Download G-code File</button>'),le=l('<div class="warning svelte-n0rr9g"><p class="svelte-n0rr9g">⚠️ No cut paths available. Please go back to the Program stage and generate cut paths first.</p></div>'),ve=l('<textarea readonly="" class="gcode-preview svelte-n0rr9g"></textarea>'),de=l('<div class="no-gcode svelte-n0rr9g"><p>Click "Generate G-code" to preview the output</p></div>'),pe=l('<div class="export-page svelte-n0rr9g"><h2 class="svelte-n0rr9g">Export G-code</h2> <div class="content svelte-n0rr9g"><div class="controls-panel"><div class="card"><h3>Export Settings</h3> <div class="project-info svelte-n0rr9g"><p class="svelte-n0rr9g"><strong>Project:</strong> </p> <!> <p class="svelte-n0rr9g"><strong>Cut Paths:</strong> </p></div> <div class="actions svelte-n0rr9g"><button class="btn"> </button> <!></div> <!></div></div> <div class="preview-panel"><div class="card"><h3>G-code Preview</h3> <!></div></div></div></div>');function be(E,F){W(F,!1);const[H,L]=se(),n=()=>oe(ne,"$project",H);let v=T(""),g=T(!1);function O(){C(g,!0),setTimeout(()=>{C(v,U()),C(g,!1)},1e3)}function U(){const{material:e,cutPaths:t}=n();if(!e||t.length===0)return`; No cut paths available
; Please configure material and generate cut paths first`;const o=`; Generated by CAM OCCT
; Material: ${e.name}
; Thickness: ${e.thickness}mm
; Cut Height: ${e.cutHeight}mm
; Feed Rate: ${e.feedRate}mm/min

G21 ; Set units to millimeters
G90 ; Absolute positioning
G94 ; Feed rate mode (units per minute)
M3 S1 ; Turn on plasma cutter
`,b=t.map((x,Q)=>`
; Cut Path ${Q+1}
G0 Z${e.cutHeight+5} ; Move to clearance height
G0 X0 Y0 ; Move to start position
G1 Z${e.cutHeight} F500 ; Pierce height
M3 S1 ; Start cut
G4 P0.5 ; Pierce delay
G1 F${x.feedRate} ; Set cut feed rate
; TODO: Add actual cut path coordinates here
G1 X10 Y0
G1 X10 Y10
G1 X0 Y10
G1 X0 Y0
M5 ; Stop plasma
G0 Z${e.cutHeight+5} ; Retract to clearance
`).join("");return o+b+`
; End program
M5 ; Turn off plasma cutter
G0 Z25 ; Move to safe height
M30 ; End program
`}function X(){const e=new Blob([c(v)],{type:"text/plain"}),t=URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download=`${n().name||"output"}.ngc`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(t)}V();var m=pe(),k=a(r(m),2),h=r(k),M=r(h),f=a(r(M),2),_=r(f),Y=a(r(_));s(_);var j=a(_,2);{var A=e=>{var t=ie(),o=te(t),b=a(r(o));s(o);var $=a(o,2),x=a(r($));s($),P(()=>{p(b,` ${n().material.name??""}`),p(x,` ${n().material.thickness??""}mm`)}),i(e,t)};u(j,e=>{n().material&&e(A)})}var w=a(j,2),Z=a(r(w));s(w),s(f);var G=a(f,2),d=r(G),D=r(d,!0);s(d);var N=a(d,2);{var B=e=>{var t=ce();S("click",t,X),i(e,t)};u(N,e=>{c(v)&&e(B)})}s(G);var z=a(G,2);{var q=e=>{var t=le();i(e,t)};u(z,e=>{n().cutPaths.length===0&&e(q)})}s(M),s(h);var y=a(h,2),R=r(y),I=a(r(R),2);{var J=e=>{var t=ve();ae(t),P(()=>re(t,c(v))),i(e,t)},K=e=>{var t=de();i(e,t)};u(I,e=>{c(v)?e(J):e(K,!1)})}s(R),s(y),s(k),s(m),P(()=>{p(Y,` ${n().name??""}`),p(Z,` ${n().cutPaths.length??""}`),d.disabled=c(g)||n().cutPaths.length===0,p(D,c(g)?"Generating...":"Generate G-code")}),S("click",d,O),i(E,m),ee(),L()}export{be as component};
